@import models.Schema._
@(battle: Battle, r1: Robot, r2: Robot, userTeam: Option[String], assetsFinder: AssetsFinder)(implicit request: Request[AnyContent])

@r1Link() = {
    <a style="color: inherit !important" href="@routes.RobotController.viewById(r1.id)">@r1.name</a>
}
@r2Link() = {
    <a style="color: inherit !important" href="@routes.RobotController.viewById(r2.id)">@r2.name</a>
}

@main(s"Battle: ${r1.name} vs ${r2.name}", "battle", assetsFinder) {
    <link rel="stylesheet" type="text/css" href="@assetsFinder.path("dist/battle_css.css")">
    <script src="@assetsFinder.path("dist/battle_js.js")" type="text/javascript"></script>

    <h1 class="mb-3 text-center">
        @(battle.winner, battle.errored) match {
            case (Some(Team.R1), false) => {
                <span class="text-blue">@r1Link() wins</span> against <span class="text-red">@r2Link()</span>
            }
            case (Some(Team.R2), false) => {
                <span class="text-red">@r2Link() wins</span> against <span class="text-blue">@r1Link()</span>
            }
            case (None, false) => {
                Draw between @r1Link() and @r2Link()
            }

            case (Some(Team.R1), true) => {
                <span class="text-blue">@r1Link() wins</span>, <span class="text-red">@r2Link() forfeits</span> because of error
            }
            case (Some(Team.R2), true) => {
                <span class="text-red">@r2Link() wins</span>, <span class="text-blue">@r1Link() forfeits</span> because of error
            }
            case (None, true) => {
                Draw between @r1Link() and @r2Link(), both forfeit because of error
            }
        }
    </h1>
    <h3 class="text-center">battle #@battle.id, @battle.formatCreated()</h3>
    @userTeam match {
        case Some(team) => {
            <h3 class="text-center">viewing as <span class="text-@team.toLowerCase">@team</span></h3>
        }
        case None => {}
    }

    <div class="mt-5">
        <battle-el data="@battle.decompressData()" team="@userTeam"></battle-el>
    </div>
}

