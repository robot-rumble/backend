@import models.Schema._
@import _root_.utils.Text.pluralize
@(board: FullBoardWithBattles, assetsFinder: AssetsFinder)(implicit request: Request[AnyContent])

@main(board.board.name, "board", assetsFinder) {
    <h1>@board.board.name</h1>

    <p class="text-grey">Publish cooldown: @board.board.formatPublishCooldown(). Matchmaker settings: @pluralize("battle", board.board.publishBattleNum) on publish, and @pluralize("battle", board.board.recurrentBattleNum) every @board.board.formatBattleCooldown().</p>

    @board.board.bio match {
        case Some(bio) => {
            <div class="mt-3">
                @Html(bio)
            </div>
        }
        case None => {}
    }

    <h2 class="mt-4">Published Robots</h2>
    <div class="_table">
        <table class="_body _robots">
            @robotRows(board.board.id, board.robots, assetsFinder)
        </table>
        <div class="_footer">
            @if(board.robots.nonEmpty) {
                <a href="@routes.BoardController.viewRobots(board.board.id.id)">
                    <img src="@assetsFinder.path("images/launch.svg")" alt="">
                    view all robots
                </a>
            }

            @if(board.board.publishingEnabled) {
                <a href="@routes.BoardController.publish(board.board.id.id)">
                    <img src="@assetsFinder.path("images/publish.svg")" alt="">
                    publish to this board
                </a>
            }
        </div>
    </div>

    @if(board.battles.nonEmpty) {
        <h2 class="mt-5">Recent Battles</h2>

        <div class="_table">
            <table class="_battles">
                @battleRows(board.battles, assetsFinder)
            </table>
            <div class="_footer">
                <a href="@routes.BoardController.viewBattles(board.board.id.id)">
                    <img src="@assetsFinder.path("images/launch.svg")" alt="">
                    view all battles
                </a>
            </div>
        </div>
    } else {
        <h2 class="mt-5">Recent Battles</h2>
        None yet
    }
}
